{% extends "dashboard/base.html" %}
{% load static %}

{% block title %}Reportes{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/reports/reports.css' %}">
{% endblock %}

{% block content %}
<div class="static-bar"></div>

<div class="grid-container">
  <div class="nav grid-item">
    <div class="breadcrumb-section">
      <nav class="breadcrumb">
        <span> \</span> <a href="/dashboard/">Dashboard</a>
        <span> \</span> <span class="active">Reportes</span>
      </nav>

      <div class="section-title">
        <h2>Reportes</h2>
        <p>Reportes filtrados con múltiples criterios – análisis detallado del proceso para decisiones informadas.</p>
      </div>
    </div>
  </div>

  <article class="data grid-item">
    <div class="data-scroll-area">
      <h4>Reporte periódico</h4>
      <div class="row mb-4 reports-form">
        <div class="col-md-3">
          <label>Periodo:</label><br>
          <select id="period-select" class="form-select">
            <option value=""></option>
            <option value="1">Hoy</option>
            <option value="2">Ayer</option>
            <option value="3">Últimos 7 días</option>
            <option value="4">Últimos 30 días</option>
            <option value="5">Personalizado</option>
          </select>
        </div>
        <div class="col-md-3">
          <label>Fecha inicio:</label>
          <input type="date" id="start-date" class="form-control" disabled>
        </div>
        <div class="col-md-3">
          <label>Fecha fin:</label>
          <input type="date" id="end-date" class="form-control" disabled>
        </div>
        <div class="col-md-3"><br>
          <button id="btn-search" class="btn btn-primary btn-buscar btn-block">Buscar</button>
        </div>
      </div>

      {% block reports %}
      {% include 'records/components/table_reports.html' %}
      {% endblock %}


      <div class="averages-report">
        <br>
        <h4>Análisis de los datos - Promedio de los resultados obtenidos en la búsqueda</h4>
        <h5>Periodo reportado: </h5>
        <p>
        <h6 id="selected-range" class="mt-3 text-muted">
        </h6>
        </p>
      </div>


      <div class="graphs-container">
        <div class="graphs-item humidity">
          <h6 class="graph-detail">Humedad (%)</h6>
          <canvas id="humidityChart" class="chart"></canvas>
        </div>
        <div class="graphs-item temperature">
          <h6 class="graph-detail">Temperatura (ºC)</h6>
          <canvas id="temperatureChart" class="chart"></canvas>
        </div>
        <div class="graphs-item weight">
          <h6 class="graph-detail">Peso (Kg)</h6>
          <canvas id="weightChart" class="chart"></canvas>
        </div>
      </div>

      <div class="averages-report">
        <br>
        <h4>Análisis de los datos - Métricas de presentación de la sal</h4>
        </p>
      </div>

      <div class="graphs-container2">
        <div class="graphs-item2 presentation-count">
          <h6 class="graph-detail">Cantidad de cargas por presentación</h6>
          <canvas id="presentationCountChart" class="chart2"></canvas>
        </div>
        <div class="graphs-item2 presentation-weight">
          <h6 class="graph-detail">Peso total (Kg) por presentación</h6>
          <canvas id="presentationWeightChart" class="chart2"></canvas>
        </div>
      </div>
      <div class="bottom-button" style="text-align: right;">
        <button class="btn btn-primary btn-block generate">Exportar PDF</button>
        <button class="btn btn-primary btn-block generate">Exportar Excel</button>
      </div>
    </div>

  </article>
</div>

<script src="{% static 'js/chart.js' %}"></script>
<script src="{% static 'js/chartjs-plugin-datalabels.js' %}"></script>
{% endblock %}